{% extends "base.html" %}
{% block content %}
	<h1>Profile of {{user.username}}</h1>

	{% if message %}
		<div class="alert alert-success">
			<ul>
				<li>{{message}}</li>
			</ul>
		</div>
	{% endif %}

	<table>
		<tr>
			{% if follows == "true" %}
				<td>
					<form class="navbar-form navbar-right" method="post" action="{{base_path}}/profile/{{user.username}}/follow">
    					<input type="hidden" value="follow" name="action"/>
						<button id="unfollow_button" onmouseover="following_onMouseEnter()" onmouseout="following_onMouseLeave()" type="submit" class="btn btn-primary">Following</button>
					</form>
				</td>
			{% elseif follows == "false" %}
				<td>
					<form class="navbar-form navbar-right" method="post" action="{{base_path}}/profile/{{user.username}}/follow">
    					<input type="hidden" value="unfollow" name="action"/>
						<button type="submit" class="btn btn-default">Follow</button>
					</form>
				</td>
			{% else %}
				<td>
					{% if follows == "self" %}
						<button disabled class="btn btn-default">You can't follow yourself.</button>
					{% else %}
						<form action="{{base_path}}/login" method="get">
							<button class="btn btn-default" type="submit">Login to follow {{user.username}}!</button>
						</form>
					{% endif %}
				</td>
			{% endif %}
			<td>&emsp;<a href="{{base_path}}/profile/{{user.username}}/favourites" class="btn btn-success">View Favourite Blabs</a>&emsp;</td>
			<td><a href="{{base_path}}/profile/{{user.username}}/followers" class="btn btn-success" disabled>View Followers</a></td>
		</tr>
	</table>

	</br>

	<table class="table table-striped table-bordered">
		<thead>
			<tr>
				<th>Username</th>
				<th>Message</th>
				<th></th>
			</tr>
		</thead>

			<tbody>
			{% for blab in blabs %}
				<tr>
					<td width="10%"><a href="{{base_path}}/profile/{{blab.username}}">{{blab.username}}</a></td>
					<td>{{blab.body}}</td>
					<td width="6%"><a href="{{base_path}}/blab/{{blab.id}}" class="btn btn-default">EXPAND</a></td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<script type="text/javascript">
		function following_onMouseEnter(button) {
			var button = document.getElementById("unfollow_button");
			button.textContent = "Unfollow!";
			button.className = "btn btn-danger";
		}
		function following_onMouseLeave(button) {
			var button = document.getElementById("unfollow_button");
			button.textContent = "Following";
			button.className = "btn btn-primary";
		}
	</script>


{% endblock %}
